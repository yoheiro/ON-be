(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{366:function(e,t,o){var content=o(394);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(23).default)("78cc0b3e",content,!0,{sourceMap:!1})},393:function(e,t,o){"use strict";o(366)},394:function(e,t,o){(t=o(22)(!1)).push([e.i,".user-data{color:#29b6f6}.div-edit-button{text-align:center}.edit-button{background:linear-gradient(90deg,#0277bd 0,#29b6f6 50%)}.cropper-face,.cropper-view-box{border-radius:50%}.crop-card{max-height:90vh;overflow:hidden}.crop-card,.crop-card-card{display:flex;align-items:center;justify-content:center}.cropper-container{overflow:hidden}",""]),e.exports=t},471:function(e,t,o){"use strict";o.r(t);o(12),o(13),o(14),o(34),o(24),o(25),o(16),o(9),o(53),o(15),o(54),o(384);var r=o(4),n=o(92),c=o(388),l=o.n(c),d=o(126);o(390);function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,o)}return t}var h={components:{VueCropper:l.a},data:function(){return{userName:"",userIcon:"",profile:"",tags:["ハッカソン","開発コンテスト","ビジネスコンテスト","スポーツ観戦","カフェ巡り","アウトドア派","インドア派","旅行","音楽","読書","カメラ","ヨガ","アニメ","カラオケ","映画鑑賞","Netflix","語学","温泉めぐり","インスタグラム","自転車","スマブラ","居酒屋めぐり","ピクニック","散歩","ジャニーズ","ネコ好き","KPOP","麻雀","ポーカー"],interestedTag:"",overlay:!1,windowSize:{height:"",width:""},previousIcon:"",imageType:"",imageName:"",cropper:{side:1,vertical:1},imageAfter:{name:null,src:null,BlobFile:null},cropperViewMode:0}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(n.b)({userId:"uid"})),created:function(){var e=this;d.a.firestore().collection("users").doc(this.userId).get().then((function(t){e.userName=t.data().userName,e.userIcon=t.data().userIcon,e.profile=t.data().profile,e.interestedTag=t.data().interestedTag})),this.windowSize={width:.95*this.$vuetify.breakpoint.width}},methods:{edit:function(){var e=this;d.a.firestore().collection("users").doc(this.userId).update({userName:this.userName,profile:this.profile,interestedTag:this.interestedTag}).then((function(){e.$router.push({name:"joinRoom"})}))},setImage:function(e){var t=this,img=new Image;img.onload=function(){var e=img.naturalWidth,o=img.naturalHeight;URL.revokeObjectURL(img.src),o>e?(t.cropperViewMode=2,t.overlay=!0):(t.cropperViewMode=3,t.overlay=!0)},img.src=URL.createObjectURL(e);var o=new FileReader;this.imageType=e.type,this.imageName=e.name,console.log(e),o.onload=function(e){t.previousIcon=e.target.result,console.log(e)},o.readAsDataURL(e)},cropImage:function(){this.previousIcon=this.$refs.cropper.getCroppedCanvas({width:100,height:100}).toDataURL(this.imageType),this.imageAfter.BlobFile=this.dataURLtoBlob(this.previousIcon),this.changeIcon()},dataURLtoBlob:function(e){return o(392)(e)},changeIcon:function(){var e=this,image=this.imageAfter.BlobFile,t=d.a.firestore().collection("users").doc(this.userId),o=d.a.storage().ref("icon/".concat(this.uid)).child(this.imageName);o.put(image).then((function(){o.getDownloadURL().then((function(o){t.update({userIcon:o}).then((function(){alert("アイコンを変更しました"),e.overlay=!1}))}))}))},rechooseImage:function(){this.overlay=!1}}},f=(o(393),o(46)),w=o(55),m=o.n(w),y=o(316),x=o(342),O=o(458),I=o(472),_=o(368),j=o(317),V=o(459),C=o(460),k=o(344),T=o(370),N=o(414),R=o(362),S=o(461),component=Object(f.a)(h,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("v-container",[o("v-row",[o("v-col",{staticClass:"text-h6 font-weight-bold user-data",attrs:{cols:"8"}},[e._v("Myユーザー情報")])],1),e._v(" "),o("v-row",[o("v-col",[o("v-text-field",{attrs:{color:"#0277bd","prepend-icon":"mdi-account-edit",label:"ユーザ名"},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}})],1)],1),e._v(" "),o("v-row",[o("v-col",[o("v-file-input",{attrs:{type:"file",accept:"image/*",placeholder:"画像を選択してください","prepend-icon":"mdi-image-edit-outline",label:"アイコン編集"},on:{change:e.setImage}})],1)],1),e._v(" "),o("v-row",[o("v-col",[o("v-textarea",{attrs:{color:"#0277bd","prepend-icon":"mdi-chat",label:"プロフィール","auto-grow":"",rows:"3"},model:{value:e.profile,callback:function(t){e.profile=t},expression:"profile"}})],1)],1),e._v(" "),o("v-row",[o("v-col",[o("span",{staticClass:"font-weight-bold"},[e._v("興味あり：")]),e._v(" "),o("v-chip-group",{attrs:{column:"",multiple:"",max:"5","active-class":"primary--text"},model:{value:e.interestedTag,callback:function(t){e.interestedTag=t},expression:"interestedTag"}},e._l(e.tags,(function(t){return o("v-chip",{key:t,attrs:{value:t}},[e._v("\n            "+e._s(t)+"\n          ")])})),1)],1)],1),e._v(" "),o("v-row",[o("v-col",{staticClass:"div-edit-button"},[o("v-btn",{staticClass:"white--text button-color edit-button",attrs:{rounded:"",width:"80vw",outlined:""},on:{click:e.edit}},[e._v("編集完了")])],1)],1)],1),e._v(" "),o("v-overlay",{staticClass:"crop-card-card",attrs:{absolute:!0,opacity:"1",value:e.overlay}},[e.overlay?o("v-card",{staticClass:"crop-card",attrs:{height:"100%"}},[o("vue-cropper",{ref:"cropper",staticClass:"crop",attrs:{guides:!1,"view-mode":e.cropperViewMode,"high-light":!1,"drag-mode":"move","auto-crop-area":1,background:!1,rotatable:!0,scalable:!0,"crop-box-resizable":!1,"crop-box-movable":!1,src:e.previousIcon,"aspect-ratio":1,"min-crop-box-height":e.windowSize.width,"min-crop-box-width":e.windowSize.width,"min-canvas-height":e.windowSize.width,"min-canvas-width":e.windowSize.width,"min-container-height":e.windowSize.width,"min-container-width":e.windowSize.width,modal:!0}})],1):e._e(),e._v(" "),o("v-footer",{attrs:{fixed:""}},[o("v-btn",{on:{click:e.rechooseImage}},[e._v("画像を選び直す")]),e._v(" "),o("v-spacer"),e._v(" "),o("v-btn",{on:{click:e.cropImage}},[e._v("変更を保存する")])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;m()(component,{VBtn:y.a,VCard:x.a,VChip:O.a,VChipGroup:I.a,VCol:_.a,VContainer:j.a,VFileInput:V.a,VFooter:C.a,VOverlay:k.a,VRow:T.a,VSpacer:N.a,VTextField:R.a,VTextarea:S.a})}}]);